/* Global responsive tweaks for Bibliomanager2 */

/* Theme variables */
:root {
  /* palettes */
  --bg: #ffffff;
  --text: #111111;
  --muted: #555555;
  --muted-2: #666666;
  --border: #dddddd;
  --panel: #ffffff;
  --nav-active-bg: #EFF6FF;
  --btn-secondary-bg: #f9fafb;
  --card-placeholder: #f3f4f6;
  --active-bg: #EEF2FF;      /* soft blue */
  --active-text: #1E3A8A;    /* deep blue */
  --overdue-bg: #FDECEA;     /* soft red */
  --overdue-text: #8A1F12;   /* deep red */
  /* chips */
  --chip-ok-bg: #E7F7EE;
  --chip-ok-border: #BDEBD3;
  --chip-ok-text: #0E7A4D;
  --chip-bad-bg: #FDECEA;
  --chip-bad-border: #F5C6C1;
  --chip-bad-text: #8A1F12;
  /* accent & statuses */
  --accent: #2563eb;         /* blue-600 */
  --accent-bg-soft: #e5f3ff; /* very light blue */
  --accent-weak: #93c5fd;    /* blue-300 (disabled) */
  --success: #10b981;        /* emerald-500 */
  --danger: #ef4444;         /* red-500 */
  color-scheme: light;
}

.theme-dark {
  --bg: #0b1220;         /* slate-950-ish */
  --text: #e5e7eb;       /* slate-200 */
  --muted: #94a3b8;      /* slate-400 */
  --muted-2: #9ca3af;    /* gray-400 */
  --border: #334155;     /* slate-700 */
  --panel: #111827;      /* gray-900 */
  --nav-active-bg: #0b2444; /* deep blue tint */
  --btn-secondary-bg: #0f172a; /* slate-900 */
  --card-placeholder: #1f2937; /* gray-800 */
  --active-bg: #0b2444;       /* dark blue tint */
  --active-text: #93c5fd;     /* light blue text */
  --overdue-bg: #3a0d0b;      /* dark red tint */
  --overdue-text: #fecaca;    /* light red text */
  /* keep chips readable on dark */
  --chip-ok-bg: #0b2e1f;
  --chip-ok-border: #14532d;
  --chip-ok-text: #86efac;
  --chip-bad-bg: #3a0d0b;
  --chip-bad-border: #7f1d1d;
  --chip-bad-text: #fecaca;
  /* accent & statuses */
  --accent: #3b82f6;          /* blue-500 (brighter on dark) */
  --accent-bg-soft: #0b2444;  /* deep blue tint */
  --accent-weak: #1e40af;     /* blue-700 (disabled-ish) */
  --success: #10b981;
  --danger: #ef4444;
  color-scheme: dark;
}

html, body, #root { background: var(--bg); color: var(--text); }

/* Base container */
.app-main { padding: 16px; }

/* Header stacks on small screens */
@media (max-width: 640px) {
  .app-header { flex-direction: column; align-items: flex-start !important; gap: 8px; }
}

/* Navigation: allow items to fill rows evenly */
.main-nav { row-gap: 8px; --nav-pad-y: 12px; --nav-pad-x: 16px; --nav-font: 16px; --nav-minw: 160px; --nav-radius: 10px; }
.main-nav a { flex: 1 1 180px; text-decoration: none; }
.main-nav a:hover, .main-nav a:focus, .main-nav a:active { text-decoration: none; }
@media (max-width: 640px) {
  .main-nav a { flex-basis: 48%; min-width: 140px; }
}

/* Hamburger menu behavior */
.hamburger { display: none !important; }
@media (max-width: 820px) {
  .hamburger { display: inline-block !important; }
  /* Collapse nav by default on small screens */
  .main-nav { display: none !important; gap: 6px 8px !important; --nav-pad-y: 8px; --nav-pad-x: 10px; --nav-font: 14px; --nav-minw: 120px; --nav-radius: 8px; }
  .main-nav.is-open { display: grid !important; grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .main-nav a { flex: initial; min-width: 0; }
}

/* Loan form: switch from 5 columns to 2, then 1 */
.loan-form { display: grid !important; grid-template-columns: 3fr 2fr 1fr 1fr min-content; gap: 12px; align-items: end; }
.loan-form .field { display: flex; flex-direction: column; min-width: 0; }
.loan-form .f-book { grid-column: 1 / 2; }
.loan-form .f-borrower { grid-column: 2 / 3; }
.loan-form .f-start { grid-column: 3 / 4; }
.loan-form .f-due { grid-column: 4 / 5; }
.loan-form .f-submit { grid-column: 5 / 6; justify-self: end; }
.loan-form .f-submit button { white-space: nowrap; }
@media (max-width: 1200px) {
  .loan-form { grid-template-columns: 2fr 2fr 1fr 1fr; }
  .loan-form .f-submit { grid-column: 1 / -1; justify-self: stretch; }
}
@media (max-width: 1024px) {
  .loan-form { grid-template-columns: 1fr 1fr; }
  .loan-form .f-book { grid-column: 1 / -1; }
  .loan-form .f-borrower { grid-column: 1 / -1; }
  .loan-form .f-start { grid-column: 1 / 2; }
  .loan-form .f-due { grid-column: 2 / 3; }
  .loan-form .f-submit { grid-column: 1 / -1; justify-self: stretch; }
}
@media (max-width: 640px) {
  .loan-form { grid-template-columns: 1fr; }
  .loan-form .f-book,
  .loan-form .f-borrower,
  .loan-form .f-start,
  .loan-form .f-due,
  .loan-form .f-submit { grid-column: 1 / -1; }
}

/* Panels and common elements */
.panel { background: var(--panel); }
.panel-title { font-size: 16px; }
.toolbar { row-gap: 6px; }
.chip { user-select: none; }

/* Add book form grid */
.add-form { display: grid !important; grid-template-columns: 3fr 3fr 2fr 2fr min-content min-content; gap: 12px; align-items: end; }
.add-form .field { display: flex; flex-direction: column; min-width: 0; }
.add-form .f-lookup button, .add-form .f-submit button { white-space: nowrap; }
.add-suggest { display: grid; gap: 6px; width: 100%; box-sizing: border-box; overflow-x: hidden; }
.add-suggest-row { display: grid; grid-template-columns: minmax(0, 1fr) auto; align-items: center; column-gap: 12px; }
.add-suggest-info { min-width: 0; overflow: hidden; }
@media (max-width: 1200px) {
  .add-form { grid-template-columns: 2fr 2fr 1fr 1fr; }
  .add-form .f-lookup { grid-column: 3 / 5; justify-self: end; }
  .add-form .f-submit { grid-column: 1 / 3; justify-self: start; }
}
@media (max-width: 1024px) {
  .add-form { grid-template-columns: 1fr 1fr; }
  .add-form .f-title, .add-form .f-author { grid-column: 1 / -1; }
  .add-form .f-lookup { grid-column: 1 / 2; justify-self: start; }
  .add-form .f-submit { grid-column: 2 / 3; justify-self: end; }
}
@media (max-width: 640px) {
  .add-form { grid-template-columns: 1fr; }
  .add-form .field { grid-column: 1 / -1; }
  .add-form .f-lookup, .add-form .f-submit { justify-self: stretch; }
}

/* Book list items: stack content and actions on narrow viewports */
.book-list { gap: 10px !important; }
@media (max-width: 820px) {
  .book-item { flex-direction: column; align-items: stretch !important; gap: 10px; }
  .book-actions { margin-left: 0 !important; justify-content: flex-start; }
  .book-actions button { flex: 0 1 auto; }
}

/* Hide print actions on tablet/phone to save space */
@media (max-width: 1024px) {
  .print-action { display: none !important; }
}

/* Available books grid already responsive; ensure tile min width is manageable on phones */
@media (max-width: 400px) {
  /* Tighter buttons to avoid horizontal overflow on very small screens */
  .add-suggest-row button { padding: 6px 8px !important; font-size: 13px; }
}
